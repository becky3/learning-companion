# mixed-genius パターン

> 共通仕様: [common.md](common.md)

## 概要

デフォルトキャラクター（デフォルトキャラクター）をリーダーに固定し、複数作品から知性キャラ + ワイルドカードを選出する軽量チーム。コンテキスト効率を重視し、少人数で機動的に動く。

## チーム構成

| 役割 | 人数 | 説明 |
|------|------|------|
| リーダー（デフォルトキャラクター） | 1名 | 管理・調整・判断 + 必要に応じて作業も実施 |
| 追加メンバー | 1〜2名 | 知性キャラ or ワイルドカード |

**合計: 2〜3人**

### fixed-theme パターンとの主な違い

| 項目 | fixed-theme | mixed-genius |
|------|-------------|-------------|
| 人数 | 4〜6人 | 2〜3人 |
| メンバー構成 | 固定枠あり（品質担当、ストーリーテラー必須） | 固定枠なし、リーダー判断 |
| リーダーの作業 | 禁止（管理専任） | 必要に応じて実施可 |
| テーマ | 1作品統一 | 複数作品混成 |
| 演出 | 作品世界観を全面活用 | 知性キャラ同士の議論が中心 |

## リーダー（デフォルトキャラクター）の役割

- **全権を持つ**: メンバー数、役割分担、品質チェック方法を全て判断
- **作業も行う**: fixed-theme と異なり、リーダー自身が実装・レビュー・テスト実行を行ってよい
- **品質チェック**: 状況に応じてサブエージェント（test-runner, code-reviewer, doc-reviewer）を使うか、メンバーに委譲するか判断

## キャラクター選出

### 知性キャラの基準

以下のいずれかに該当するキャラクターを選出する:

- 作中で**天才・学者・戦略家**として描かれている
- **論理的思考・計画立案・問題解決**に長けた描写がある

### ワイルドカード枠

チームに多様な視点を入れるため、1名は「知性以外の強み」を持つキャラも選出可能:

- 直感型、行動力特化、コミュニケーション特化など
- 必須ではない（全員知性キャラでもよい）

### 選出ルール

- **同一作品から複数選出は禁止**（混成チームの意義を保つ）
- **重複回避**: 直近5回の履歴に含まれるキャラと被らない
- **選出者**: デフォルトキャラクター（リーダー）が知識に基づいて選出
- **ハズレ対応**: 相性が悪かったキャラはメモリ（`memory/character-notes.md`）に記録し、以降の選出で考慮

## 履歴フォーマット

```json
{
  "pattern": "mixed-genius",
  "theme": "mixed-genius",
  "datetime": "ISO 8601",
  "characters": ["キャラ1", "キャラ2"],
  "members": [
    { "name": "キャラ1", "work": "作品A", "role": "議論担当" },
    { "name": "キャラ2", "work": "作品B", "role": "実装担当" }
  ]
}
```

- `theme` フィールドは `"mixed-genius"` で固定
- `characters` および `members` には**追加メンバーのみ**を記録する（リーダーは固定のため履歴に含めない）
- `members` 配列にキャラ名・出典作品・役割を記録
- `members` はオプショナル（fixed-theme パターンの既存エントリには存在しない場合がある）

## チーム構築手順

1. **履歴ファイル確認**: `~/.claude/team-theme-history.json` を読み込む
2. **キャラ選出**: 直近5回と被らないキャラを選ぶ（デフォルトキャラクターが判断）
3. **履歴更新**: 選出結果を履歴に追加（**メンバー生成前に実行**）
4. **メンバー生成**: Task ツールでスポーン
5. **ターン終了**: プロンプトを返し、メンバーからのメッセージを待つ

## 演出ルール

fixed-theme のような原作関係性ベースの演出は使えない（作品が異なるため）。
代わりに以下の演出パターンを使用:

- **知性キャラ同士の理論バトル**: 異なるバックグラウンドからの分析・反論
- **ワイルドカードの突飛な発想**: 知性組が想定しない角度からの意見
- **デフォルトキャラクターの裁定**: 議論を整理し、科学的・合理的に結論を導く

ストーリーテラーは配置しない（少人数のため、デフォルトキャラクターが俯瞰も兼ねる）。

## 受け入れ条件

- [ ] AC1: デフォルトキャラクターがリーダーとして固定される
- [ ] AC2: 追加メンバーが1〜2名で構成される
- [ ] AC3: 同一作品から複数キャラが選出されない
- [ ] AC4: 直近5回のキャラと重複しない
- [ ] AC5: 履歴に members 配列が記録される
- [ ] AC6: リーダーが作業（実装・レビュー等）を実施できる
