# F4: 学習トピック提案

## 概要

F2で収集した記事情報とF3で蓄積したユーザープロファイルを組み合わせ、オンラインLLMを使って「次に学ぶべきトピック」を提案する。

## ユーザーストーリー

- ユーザーとして、自分の興味・スキル・目標に基づいた学習トピックの提案を受けたい。
- ユーザーとして、「次に何を学べばいい？」と聞くだけで、パーソナライズされた提案を得たい。

## 入出力仕様

### トピック提案

**入力:**
- ユーザーからの提案リクエスト（メンションで「おすすめのトピックは？」等）
- user_profilesテーブルのユーザー情報
- articlesテーブルの最近の記事（直近1週間程度）

**処理:**
1. ユーザープロファイル（interests, skills, goals）をDBから取得
2. 最近の収集記事のタイトル・要約一覧を取得
3. オンラインLLMに以下を渡してトピック提案を生成:
   - ユーザーの現在のスキル・興味・目標
   - 最近のトレンド記事
   - 「次に学ぶべきトピック」を3〜5個提案するよう指示

**出力（Slackメッセージ例）:**
```
:star2: あなたへのおすすめ学習トピック

1. **FastAPIでのAPI設計パターン**
   Pythonスキルを活かして、実践的なWeb API開発を学びましょう。
   最近asyncioに興味があるようなので、FastAPIの非同期処理と相性が良いです。

2. **pandasによるデータ前処理**
   データサイエンティストを目指すなら、まずデータの前処理スキルが重要です。
   SQL経験があるので、pandasのDataFrame操作はスムーズに学べるはずです。

3. **scikit-learnで始める機械学習入門**
   目標に直結するトピックです。Pythonとデータ前処理ができれば取り組めます。

:speech_balloon: 気になるトピックがあれば、詳しく聞いてね！
```

## 受け入れ条件

- [ ] AC1: ユーザープロファイルをDBから取得して提案に反映できる
- [ ] AC2: 最近の収集記事の情報を提案のコンテキストとして使用できる
- [ ] AC3: 3〜5個のトピック提案を生成できる
- [ ] AC4: 各提案にユーザーのスキル・目標との関連性の説明が含まれる
- [ ] AC5: プロファイルが空の場合、一般的なおすすめを返しつつプロファイル充実を促す

## 使用LLMプロバイダー

**オンライン (OpenAI/Claude)** — パーソナライズに推論力が必要

## 関連ファイル

| ファイル | 役割 |
|---------|------|
| `src/services/topic_recommender.py` | トピック提案生成ロジック |
| `src/slack/handlers.py` | 提案リクエストのハンドリング |
| `src/db/models.py` | user_profiles, articlesモデル参照 |

## テスト方針

- LLMをモックしてトピック提案生成をテスト
- プロファイルが空の場合のフォールバック動作テスト
- 記事データが少ない場合の動作テスト
