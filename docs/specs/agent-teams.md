# エージェントチーム機能

## 概要

リーダー1名とチームメンバー（独立したClaude Codeインスタンス）で構成される協調作業システム。

> **実験的機能**: 将来のアップデートで仕様変更の可能性あり

## 有効化

`.claude/settings.json`:

```json
{ "env": { "CLAUDE_CODE_EXPERIMENTAL_AGENT_TEAMS": "1" } }
```

設定後、Claude Code再起動が必要。

## サブエージェントとの違い

| 特性 | サブエージェント | エージェントチーム |
|------|-----------------|-------------------|
| 通信 | リーダーとのみ | メンバー同士も可能 |
| タスク管理 | 個別 | 共有タスクリスト |
| 適したタスク | 単一専門タスク | 複雑な並行作業 |

## 適したユースケース

- 複数視点での調査・レビュー
- 干渉しない並行開発
- 競合仮説でのデバッグ
- フロントエンド/バックエンド/テストの同時開発

## キャラクターテーマ

「チームで開発して」でランダムにキャラクターテーマが選択される。

- 特定テーマの指定も可能
- 詳細: `.claude/team-themes/GUIDELINES.md`

## 必須ルール

### レビュー担当

チームには必ず1名以上のレビュー担当を含める。

### リーダーの報告

- メンバーの発言はそのまま引用してユーザーに共有
- メンバーには細かく分割して報告させる

### チームのライフサイクル

| 操作 | メンバーの状態 |
|------|----------------|
| プロンプトを返す | 待機中（シャットダウンしない） |
| チーム解散 | 終了（ユーザーの明示的指示が必要） |

## プロンプト例

- 新機能: `Issue #42 を実装。Spec-Writer/Implementer/QA-Leadの3人で`
- バグ調査: `バグ #123 を調査。3人で異なる仮説を検証`
- レビュー: `PR #456 をレビュー。セキュリティ/パフォーマンス/テストの3観点で`

## 注意事項

- トークンコスト増大（各メンバーが独立コンテキスト）
- 同じファイルを複数メンバーが編集しないようタスク分割
- in-processモードではセッション再開不可
- 1セッション1チーム

## 受け入れ条件

- [ ] AC1: settings.jsonで有効化できる
- [ ] AC2: チーム作成プロンプトが認識される
- [ ] AC3: メンバー間で共有タスクリストが機能する
- [ ] AC4: キャラクターテーマがランダム選択される
- [ ] AC5: テーマ履歴が保存される

## 関連ファイル

| ファイル | 役割 |
|----------|------|
| `.claude/settings.json` | 有効化設定 |
| `.claude/team-themes/GUIDELINES.md` | キャラクター演出詳細 |
| `~/.claude/team-theme-history.json` | テーマ履歴（git管理外） |
