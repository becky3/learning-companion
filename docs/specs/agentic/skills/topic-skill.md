# 学びトピック管理スキル

## 概要

ジャーナルや MEMORY.md から学びトピックを自動抽出し、Zenn 形式の技術記事を生成するスキル。

## 背景

- 開発中に得た知見（ハマったこと、解決策、教訓）はジャーナルに記録されているが、対外発信できる形式に変換するには手間がかかる
- 自動抽出・記事生成を仕組み化することで、発信のハードルを下げる

## コマンド体系

| コマンド | 用途 |
|---|---|
| `/topic` | ジャーナルからトピック候補を自動抽出・表示 |
| `/topic <番号>` | 選択したトピックの Zenn 記事を生成 |

## 処理フロー

```mermaid
flowchart TD
    A[/topic 実行] --> B{引数チェック}
    B -->|引数なし| C[トピック抽出]
    B -->|番号| D[記事生成]

    C --> C1[journal/*.md スキャン]
    C1 --> C1b[retro/*.md スキャン]
    C1b --> C2[MEMORY.md スキャン]
    C2 --> C3[優先度スコアリング]
    C3 --> C4[候補一覧表示]
    C4 --> C5[過去の記事化履歴表示]

    D --> D1[トピック情報取得]
    D1 --> D2[ソースセクション読込]
    D2 --> D3[Zenn 記事生成]
    D3 --> D4[ファイル保存]
    D4 --> D5[履歴に追記]
```

### トピック抽出

**抽出対象**:

- ジャーナルファイル（レトロ変換ファイル含む）
- MEMORY.md（Claude Code 開発知見）

**抽出ルール**:

- ジャーナル形式: `- **気づき**:` / `- **判断**:` / `- **教訓**:` を検出しトピック候補として抽出
- レトロ形式（`retro-` プレフィックス付きファイル）: `## 改善点` / `## ハマったこと` セクションを検出し、配下の `###` 見出しをトピック候補として抽出

**優先度スコアリング**:

| 条件 | 優先度 |
|---|---|
| セクションに「教訓」が含まれる | 高 |
| セクションに「対応」が含まれる | 中 |
| コードブロックが含まれる | 中 |
| 「問題」「原因」キーワードがある | 中 |

候補一覧の後に記事化履歴を参考情報として表示する（自動除外はしない。過去に記事化したトピックでも候補に表示され、ユーザーが都度判断する）。

### 記事生成

選択したトピックのソースセクションを読み込み、Zenn フロントマター形式に準拠した記事を生成する。

**記事構成**:

```markdown
---
title: "{タイトル}"
emoji: "{自動選択}"
type: "tech"
topics: ["{tag1}", "{tag2}"]
published: false
---

## TL;DR

{3行で要約}

## 背景

{なぜこの問題に遭遇したか}

## 問題

{何が起きたか}

## 解決策

{どう解決したか、コード例}

## まとめ

{学びのポイント}
```

**挿絵・スクリーンショット**:

画面のスクリーンショットが有効な箇所には `{{画像の説明}}` プレースホルダーを挿入する（ユーザーが後から実際の画像に差し替える前提）。mermaid で表現できる図表（フローチャート、シーケンス図等）は mermaid を使用する。

**記事化履歴管理**:

記事生成時に日付・タイトル・ソース参照を履歴ファイルに追記する。`/topic` 実行時に末尾に過去の記事化履歴として表示する。

### 記事生成後の確認

1. **事実確認**: 実際に確認した環境・条件と記述が一致しているか
2. **推敲**: 技術的な誤りがないか、誤解を招く表現がないか
3. **正直さ**: 未確認の内容は「ドキュメントによると」「一般的には」と注記しているか

Zenn にアップロード後の AI レビュー指摘は、技術的妥当性を判断した上で対応する（鵜呑みにしない）。

## 入出力

### 入力

| 入力 | 形式 |
|---|---|
| `/topic` | 引数なし。候補抽出モード |
| `/topic <番号>` | 候補番号。記事生成モード |

不正な番号を指定した場合はエラーメッセージを表示する。

### 出力

| モード | 出力 |
|---|---|
| 候補抽出 | 優先度順のトピック一覧 + 過去の記事化履歴 |
| 記事生成 | `docs/zenn-drafts/` に Zenn 記事ファイル（`published: false`）を生成。履歴ファイルにソース参照を追記 |
