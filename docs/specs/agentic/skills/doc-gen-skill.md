# ドキュメント生成スキル

## 概要

プロジェクトドキュメント（仕様書）の新規作成（doc-gen）を行うスキルを定義する。

## 背景

- ドキュメント作成は定型的な構造を持ち、テンプレートやスタイルガイドへの準拠が必要
- Issue/PR/コミット履歴からの情報収集とテンプレート適用をスキル化し、一貫したフォーマットを保証する

## 制約

- 生成後のドキュメントは必ずユーザーがレビューする前提とする
- 既存ファイルへの上書きは警告を表示してから行う

## コマンド体系

| コマンド | 用途 |
| --- | --- |
| `/doc-gen spec <feature-name>` | 仕様書を新規作成 |

## 処理フロー

```mermaid
flowchart TD
    A[/doc-gen 実行] --> B[引数からドキュメント種別・機能名を判定]
    B --> C[スタイルガイドでカテゴリ決定]
    C --> D[テンプレート・スタイルガイドを参照]
    D --> E[Issue/PR/コミットから関連情報を収集]
    E --> F[テンプレートに従い仕様書を生成]
    F --> G{既存ファイルあり?}
    G -->|あり| H[上書き警告を表示]
    G -->|なし| I[ファイル保存・結果表示]
    H --> I
```

カテゴリはスタイルガイドのディレクトリ構成に従い、
`features/`・`infrastructure/`・`workflows/`・`agentic/` から選択する。

情報収集ステップでは以下を調査する:

- Issue 本文・コメントからの要件抽出
- 関連するコード実装の調査（Glob で機能名に関連するファイルを検索）

Issue/PR が見つからない場合は警告を表示し、手動入力で作成を継続する。

## 入出力

| 項目 | 内容 |
| --- | --- |
| 入力 | ドキュメント種別（`spec`）、機能名 |
| 出力 | `docs/specs/{category}/{feature-name}.md` にファイルを生成。生成結果サマリーを表示 |

## 関連ドキュメント

- `doc-edit-skill` — ドキュメント編集スキル
- `style-guide` — スタイルガイド（カテゴリ分類・記述ルール）
- `docs/specs/templates/` — 文書種別テンプレート
