# mixed-genius パターン

## 概要

セッションキャラクター（`/restore` で選出された現セッションのキャラクター）をリーダーに固定し、複数作品から知性キャラ + ワイルドカードを選出する軽量チーム。コンテキスト効率を重視し、少人数で機動的に動く。

共通仕様: [common.md](common.md)

## 背景

fixed-theme パターンの4〜6人構成はトークンコストが高く、軽量なタスクには過剰になる。少人数で異なる作品のキャラクターを混成することで、多様な視点を維持しつつコンテキスト効率を高める。

## 制約

- **同一作品から複数選出は禁止**（混成チームの意義を保つ）
- 直近5回の履歴に含まれるキャラクターと被らないこと
- ストーリーテラーは配置しない（少人数のため、リーダーが俯瞰も兼ねる）

## チーム構成

| 役割 | 人数 | 責務 |
|------|------|------|
| リーダー（セッションキャラクター） | 1名 | 管理・調整・判断 + 必要に応じて作業も実施 |
| 追加メンバー | 1〜2名 | 知性キャラ or ワイルドカード |

**合計: 2〜3人**

### fixed-theme パターンとの主な違い

| 項目 | fixed-theme | mixed-genius |
|------|-------------|-------------|
| 人数 | 4〜6人 | 2〜3人 |
| メンバー構成 | 固定枠あり（品質担当、ストーリーテラー必須） | 固定枠なし、リーダー判断 |
| リーダーの作業 | 禁止（管理専任） | 必要に応じて実施可 |
| テーマ | 1作品統一 | 複数作品混成 |
| 演出 | 作品世界観を全面活用 | 知性キャラ同士の議論が中心 |

### リーダー（セッションキャラクター）の役割

- **全権を持つ**: メンバー数、役割分担、品質チェック方法を全て判断する
- **作業も行う**: fixed-theme と異なり、リーダー自身が実装・レビュー・テスト実行を行ってよい
- **品質チェック**: 状況に応じてサブエージェント（test-runner, code-reviewer, doc-reviewer）を使うか、メンバーに委譲するか判断する

### キャラクター選出

#### 知性キャラの基準

以下のいずれかに該当するキャラクターを選出する:

- 作中で**天才・学者・戦略家**として描かれている
- **論理的思考・計画立案・問題解決**に長けた描写がある

#### ワイルドカード枠

チームに多様な視点を入れるため、1名は「知性以外の強み」を持つキャラも選出可能:

- 直感型、行動力特化、コミュニケーション特化など
- 必須ではない（全員知性キャラでもよい）

#### 選出ルール

- セッションキャラクター（リーダー）が知識に基づいて選出する
- 相性が悪かったキャラはローカル環境のメモファイル（`~/.claude/memory/character-notes.md`、git 管理外）に記録し、以降の選出で考慮する

### 履歴フォーマット

- `pattern`: `"mixed-genius"`
- `theme`: `"mixed-genius"`（固定）
- `characters`: 追加メンバーのみ（リーダーは固定のため含めない）
- `members`: `name`（キャラ名）・`work`（出典作品）・`role`（役割）を持つオブジェクトの配列（オプショナル）

## 運用ルール

### 演出ルール

fixed-theme のような原作関係性ベースの演出は使えない（作品が異なるため）。代わりに以下の演出パターンを使用する:

- **知性キャラ同士の理論バトル**: 異なるバックグラウンドからの分析・反論
- **ワイルドカードの突飛な発想**: 知性組が想定しない角度からの意見
- **セッションキャラクターの裁定**: 議論を整理し、合理的に結論を導く

## 構築手順

1. **履歴ファイル確認**: `~/.claude/team-theme-history.json` を読み込む
2. **キャラ選出**: 直近5回と被らないキャラを選ぶ（セッションキャラクターが判断）
3. **履歴更新**: 選出結果を履歴に追加する（**メンバー生成前に実行**）
4. **メンバー生成**: Task ツールでスポーンする
5. **ターン終了**: プロンプトを返し、メンバーからのメッセージを待つ

## 関連ドキュメント

- [共通仕様](common.md)
- [fixed-theme パターン](fixed-theme.md)
